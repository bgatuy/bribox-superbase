/* =========================
   BASE RESET & TAPHIGHLIGHT
========================= */
* { margin:0; padding:0; box-sizing:border-box; -webkit-tap-highlight-color:transparent; }
html, body { height:100%; -webkit-text-size-adjust:100%; }
html { font-size:14px; }
body {
  font-family:'Segoe UI', sans-serif;
  background:#f4f4f4; color:#333; line-height:1.5;
}

/* =========================
   TOKENS & TRANSITIONS
========================= */
:root{
  --ease-smooth:cubic-bezier(0.22,0.61,0.36,1);
  --duration-page:320ms;
  --duration-ui:220ms;
  --shadow-soft:0 18px 40px rgba(15,23,42,.15);
}

html.has-smooth body{
  opacity:0;
  transform:translateY(18px);
  filter:blur(.5px);
  transition:
    opacity var(--duration-page) var(--ease-smooth),
    transform var(--duration-page) var(--ease-smooth),
    filter var(--duration-page) var(--ease-smooth);
}
html.has-smooth.is-page-ready body{
  opacity:1;
  transform:none;
  filter:none;
}
html.has-smooth.is-page-leaving body{
  opacity:0;
  transform:translateY(-8px);
  filter:blur(1px);
  pointer-events:none;
}

@media (prefers-reduced-motion: reduce){
  :root{
    --duration-page:0ms;
    --duration-ui:0ms;
  }
  html.has-smooth body{
    opacity:1 !important;
    transform:none !important;
    filter:none !important;
  }
}

/* =========================
   DASHBOARD LAYOUT
========================= */
.dashboard{ display:flex; min-height:100vh; }
.sidebar{
  width:250px; flex-shrink:0;
  background:#111827; /* Warna abu-abu gelap modern */
  padding:2rem 1rem;
  display:flex; flex-direction:column; gap:2rem;
}
.logo{ font-size:1.2rem; font-weight:700; color:#fff; }
nav{ display:flex; flex-direction:column; gap:.8rem; }
.sidebar nav{ font-size:13px; } /* base size menu */

/* --- Sidebar items & icons --- */
.sidebar nav a,
.sidebar nav .nav-group{
  display:flex; align-items:center; gap:10px;
  padding:10px 12px; border-radius:8px; /* Sudut lebih modern */
  text-decoration:none; color:#9ca3af; /* Warna teks lebih lembut */
  line-height:1.3; font-size:13px;
  border-left: 3px solid transparent; /* Placeholder untuk indikator aktif */
  transition: background-color var(--duration-ui) ease, color var(--duration-ui) ease;
}
.sidebar nav a:hover,
.sidebar nav .nav-group:hover{
  background:#1f2937; /* Latar hover yang lebih solid */
  color:#fff;
}

/* state */
.sidebar nav a.active{
  background:#1f2937; color:#fff; border-left-color:#2563eb; /* Indikator aktif biru */
}

/* konsistensi ikon Material */
.sidebar nav .material-icons,
.sidebar nav .material-icons-outlined{
  font-size:20px; line-height:1;
  width:22px; height:22px; flex:0 0 22px;
  display:inline-flex; align-items:center; justify-content:center;
}

/* --- Collapsible group (GLOBAL, single source) --- */
.sidebar nav .nav-group{
  appearance:none; -webkit-appearance:none;
  border:0; background:transparent; cursor:pointer;
  width:100%; text-align:left; font:inherit; font-weight:400;
}
.sidebar nav .nav-group.has-active{ color:#fff; background: #1f2937; }

/* caret kanan */
.sidebar nav .nav-group::after{
  content:""; margin-left:auto; width:14px; height:14px; flex:0 0 14px;
  background-color:currentColor;
  -webkit-mask:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M3 6 L8 11 L13 6" fill="none" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>') no-repeat center/12px 12px;
          mask:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M3 6 L8 11 L13 6" fill="none" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>') no-repeat center/12px 12px;
  transition:transform .2s ease;
}
.sidebar nav .nav-group[aria-expanded="false"]::after{ transform:rotate(180deg); }

/* submenu */
.sidebar nav .submenu{
  margin-top:5px; padding-left:12px;
  border-left:1px solid #374151; /* Garis submenu yang lebih jelas */
}
.sidebar nav .submenu a{
  display:block; margin:4px 0; padding:6px 12px;
}

/* main + header */
.main{
  flex:1; padding:2rem;
  transition:opacity var(--duration-ui) var(--ease-smooth), transform var(--duration-ui) var(--ease-smooth);
}
.dashboard-header{
  display:flex; justify-content:space-between; align-items:center;
  margin-bottom:1.5rem; min-height:40px; position:relative;
}
/* title absolute center (desktop) */
.dashboard-header .page-title,
.dashboard-header h1,
.dashboard-header h3{
  position:absolute; left:50%; top:50%;
  transform:translate(-50%,-50%);
  margin:0; text-align:center; pointer-events:none;
}
.header-logout-btn {
  position: absolute;
  right: 1rem;
  top: 50%;
  transform: translateY(-50%);
  background: #f8f9fa;
  border: 1px solid #dee2e6;
  color: #b91c1c;
  padding: 7px 10px;
  border-radius: 8px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:6px;
  min-width:44px;
  min-height:44px;
  transition: transform var(--duration-ui, 120ms) ease, box-shadow var(--duration-ui, 120ms) ease;
}
.header-logout-btn:active{
  transform: translateY(-50%) scale(0.98);
  box-shadow: 0 2px 6px rgba(0,0,0,0.12) inset;
}
/* Atur ukuran ikon di dalam tombol logout */
.header-logout-btn .material-icons {
  font-size: 25px; /* Ubah nilai ini untuk memperbesar/memperkecil ikon */
  vertical-align: middle; /* Memastikan ikon tetap di tengah secara vertikal */
}
.header-logout-btn.has-avatar{
  width: 44px;
  height: 44px;
  padding: 4px;
  border-radius: 999px;
}
.logout-avatar{
  width: 35px;
  height: 35px;
  border-radius: 50%;
  object-fit: cover;
  display: block;
  background: #e5e7eb;
}
.header-logout-btn.avatar-loading{
  opacity: 0.6;
  pointer-events: none;
}


/* =========================
   CREDIT (sidebar & header)
========================= */
.sidebar-credit, .page-credit{
  display:inline-flex; align-items:center; gap:8px;
  font-size:11px; line-height:1.5; color:#94a3b8; opacity:.95;
}
.sidebar-credit b, .page-credit b{ color:#94a3b8; }
.sidebar-credit::before, .page-credit::before{
  content:""; width:8px; height:8px; border-radius:50%;
  background:#94a3b8; box-shadow:0 0 0 2px rgba(34,197,94,.18);
  translate:0 -7px;
}
.page-credit{ position:absolute; right:24px; top:50%; transform:translateY(-50%); }
.sidebar-credit{ margin-top:auto; padding:10px 12px; border-top:1px solid rgba(255,255,255,.06); }

/* =========================
   CARDS & FORMS
========================= */
.card{
  background:#fff; padding:1.5rem; border-radius:12px;
  box-shadow:0 2px 10px rgba(0,0,0,.05);
}
.card h3{ margin-bottom:1rem; text-align:center; }
.form-group{ display:flex; flex-direction:column; align-items:center; gap:.5rem; margin:1rem 0; position:relative; }
.form-group select, .form-group input[type="date"]{
  max-width:150px; width:100%; font-size:12px; text-align:left; text-align-last:center;
}

/* Compact text input for lokasi (datalist input) */
.form-group input#inputLokasi{
  color-scheme: light;
  width: 100%;
  font-size:12px;
  padding:6px 10px;
  border:1px solid #e5e7eb;
  border-radius:8px;
  background: #ecf0f1;
}
/* Custom dropdown popup (light theme) */
.combo-popup{
  position:absolute; left:0; top:0;
  margin-top:6px; max-height:220px; overflow:auto;
  background:#fff; border:1px solid #e5e7eb; border-radius:10px;
  box-shadow:0 8px 24px rgba(0,0,0,.12); padding:6px; z-index:60;
  box-sizing:border-box;
  transition:opacity var(--duration-ui) var(--ease-smooth), transform var(--duration-ui) var(--ease-smooth);
  opacity:0; transform:translateY(6px);
  pointer-events:none; visibility:hidden;
}
.combo-item{ padding:8px 10px; border-radius:8px; cursor:pointer; font-size:12px; color:#111; }
.combo-item:hover, .combo-item.active{ background:#f3f4f6; }
.combo-popup.is-visible{
  opacity:1; transform:translateY(0);
  pointer-events:auto; visibility:visible;
}
label{ font-weight:600; }
input[type="file"], select, pre,
input[type="date"], input[type="text"], input[type="number"]{
  display:block; width:100%; margin-bottom:1rem;
  padding:.6rem; font-size:1rem;
  border:1px solid #ccc; border-radius:8px; background:#fff;
}
pre{ background:#ecf0f1; min-height:120px; white-space:pre-wrap; }

/* =========================
   BUTTONS
========================= */
button{
  padding:.9rem 2rem; font-size:.9rem; border:1px solid transparent; border-radius:8px; font-weight:700; cursor:pointer;
  transition: background-color .15s ease, transform .05s ease, filter .15s ease, border-color .15s ease, color .15s ease;
}
.card button, .card .upload-label{ margin:0 auto; display:inline-flex; align-items:center; justify-content:center; }
.card .upload-label{ max-width:180px; width:100%; }
.card button{ max-width:100%; }
.btn-row{ display:flex; gap:12px; margin-top:20px; flex-wrap:wrap; }

/* --- Modern Button Palette --- */
button.primary{ background:#2563eb; color:#fff; }
button.primary:hover{ background:#1d4ed8; }

button.secondary {
  background: #fff;
  color: #374151; /* Cool Gray Text */
  border-color: #d1d5db; /* Light Gray Border */
  font-weight: 600;
}
button.secondary:hover {
  background: #f9fafb; /* Very light gray background on hover */
}

button.teal {
  background: #14b8a6; /* Teal */
  color: #fff;
}
button.teal:hover {
  background: #0d9488;
}
button.amber {
  background: #f59e0b; /* Amber */
  color: #fff;
}
button.amber:hover { background: #d97706; }

button.danger{ background:#dc2626; color:#fff; }
button.danger:hover{ background:#b91c1c; }

/* upload label */
.upload-label, .btn-upload{
  display:inline-flex; align-items:center; gap:8px;
  background:#3498db; color:#fff; padding:12px; border-radius:8px; cursor:pointer; user-select:none;
  transition:transform .05s, background-color .2s, filter .15s;
  margin-bottom:1rem; font-size:.9rem;
}
.upload-label:hover, .btn-upload:hover{ background:#2980b9; filter:brightness(1.05); }
.upload-label:active, .btn-upload:active{ transform:translateY(1px); filter:brightness(.95); }
input[type="file"]{ display:none; }

/* varian tombol */
#copyBtn, .btn-copy{ background:#2ecc71; color:#fff; }
#generateBtn, .btn-generate{ background:#16a34a; color:#fff; }
#resetHistoryBtn, .btn-reset{ background:#d97706; color:#fff; }
.btn-del, .btn-delete{
  background:#dc3545; color:#fff; padding:8px 15px; font-size:.75rem; border:0; border-radius:6px; font-weight:700; cursor:pointer;
  transition:background-color .2s, transform .05s, filter .15s;
}

/* center khusus Trackmate/AppSheet */
body[data-page="trackmate"] .upload-label,
body[data-page="trackmate"] .btn-upload,
body[data-page="trackmate"] #copyBtn,
body[data-page="trackmate"] .btn-copy,
body[data-page="appsheet"] .upload-label,
body[data-page="appsheet"] .btn-upload,
body[data-page="appsheet"] #copyBtn,
body[data-page="appsheet"] .btn-copy{
  display:flex; justify-content:center; margin:12px auto; text-align:center;
}

/* =========================
   INTERACTIONS (pointer-aware)
========================= */
@media (hover:none), (pointer:coarse){
  .sidebar nav a:hover, .sidebar nav .nav-group:hover{ background:#3498db; color:#fff; transform:translateX(2px); }
  .upload-label:active, .btn-upload:active,
  button:active, .btn-del:active, .btn-delete:active,
  #copyBtn:active, .btn-copy:active,
  #generateBtn:active, .btn-generate:active,
  #resetHistoryBtn:active, .btn-reset:active{
    transform:translateY(1px); filter:brightness(.95);
  }
}
@media (hover:hover) and (pointer:fine){
  .sidebar nav a:hover, .sidebar nav a.active, .sidebar nav .nav-group:hover{ background:#3498db; color:#fff; transform:translateX(2px); }
  .upload-label:hover, .btn-upload:hover{ background:#2980b9; filter:brightness(1.05); }
  #copyBtn:hover, .btn-copy:hover,
  #generateBtn:hover, .btn-generate:hover{ filter:brightness(1.06); }
  .btn-del:hover, .btn-delete:hover{ background:#c82333; }
}

/* =========================
   TABLES (Enhanced for Serah Terima)
========================= */
.table-wrap, .table-container {
  width: 100%;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
  border: 1px solid #e5e7eb;
  border-radius: 12px;
  background: #fff; /* Tambahkan background putih */
  box-shadow: 0 2px 10px rgba(0,0,0,.05); /* Tambahkan shadow seperti card */
}

/* Beri tinggi maksimal pada kontainer tabel agar bisa di-scroll secara vertikal di semua perangkat */
body[data-page="serah"] .table-container {
  max-height: 60vh;
}

.table {
  width: 100%;
  border-collapse: collapse;
  background: #fff;
}
.table td {
  padding: 14px 16px; /* Lebih lega, seperti tabel admin */
  text-align: left;
  font-size: .9rem;
  border-bottom: 1px solid #f1f5f9; /* Garis abu-abu sangat muda */
  vertical-align: middle;
}
.table th {
  padding: 12px 16px;
  text-align: left;
  vertical-align: middle;
}
.table thead th {
  background: #f8fafc; /* Warna abu-abu muda seperti tabel admin */
  font-weight: 700; /* Dibuat lebih tebal, sama seperti tabel Monthly Data */
  color: #475569; /* Warna teks seperti tabel admin */
  text-transform: uppercase;
  font-size: .75rem;
  letter-spacing: .5px; /* Spasi huruf seperti tabel admin */
  position: sticky;
  top: 0;
  z-index: 2;
  border-bottom: 2px solid #e2e8f0; /* Garis bawah header yang tegas */
}
.table tbody tr:last-child td {
  border-bottom: 0;
}
.table tbody tr:hover {
  background-color: #f8fafc; /* Efek hover seperti tabel admin */
}
.table .text-center {
  text-align: center;
}
/* Khususkan tinggi baris untuk tabel Serah Terima agar lebih rapat */
body[data-page="serah"] .table td {
  padding-top: 8px;
  padding-bottom: 8px;
}
.table td.aksi {
  white-space: nowrap;
}
/* Override default .btn-del for a modern, icon-only look in the Serah Terima table */
.table td.aksi .btn-del {
  width: 32px;
  height: 32px;
  min-width: 32px;
  padding: 0;
  font-size: 0; /* Hide text for icon-only display */
  border-radius: 8px;
  border: none;
  background-color: #fee2e2; /* Light red background, like in monthly-data */
  color: #dc2626; /* Dark red icon color */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: background-color .15s ease;
}
.table td.aksi .btn-del:hover {
  background-color: #fecaca; /* Darker on hover */
}
/* Style for the icon inside the button */
.table td.aksi .btn-del .material-icons {
  font-size: 20px;
  line-height: 1;
}

/* =========================
   CONTROLS BAR
========================= */
.controls-bar {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  align-items: flex-end;
  margin-bottom: 1.5rem;
}
.controls-bar.card {
  padding: 1.5rem;
}
.controls-bar .controls-left,
.controls-bar .controls-right {
  display: flex;
  align-items: flex-end;
  gap: 1rem;
  flex-wrap: wrap;
}
.controls-bar .controls-right {
  margin-left: auto;
}
.controls-bar .form-group {
  margin: 0;
  gap: .5rem;
  align-items: stretch; /* Override default center alignment */
}
.controls-bar label {
  font-weight: 500;
  font-size: 0.9rem;
  margin: 0;
  text-align: left; /* Ensure label text is aligned to the left */
}
.controls-bar input, .controls-bar select {
  margin-bottom: 0;
  padding: 0.5rem 0.75rem;
  font-size: 0.9rem;
  min-width: 240px; /* Made wider for better readability on desktop */
}
.controls-bar .btn-row,
.controls-bar .controls-right button {
  margin: 0; /* Reset margin */
  padding: 0.7rem 1.3rem; /* Sedikit lebih besar untuk tinggi ~40px */
  font-size: 0.9rem; /* Sedikit lebih besar agar proporsional */
  line-height: 1; /* Pastikan teks di tengah vertikal */
}

/* =========================
   DIALOG
========================= */
dialog {
  border: 1px solid #e5e7eb;
  border-radius: 12px;
  box-shadow: 0 10px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
  padding: 1.5rem;
  min-width: 420px;
  max-width: 90vw;
}
dialog::backdrop {
  background: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(3px);
}
dialog h3 {
  margin: 0 0 1rem;
  font-size: 1.25rem;
}
dialog input[type="search"] {
  width: 100%;
  margin-bottom: 1rem;
}
dialog .dialog-list-wrapper {
  max-height: 45vh;
  overflow: auto;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  padding: 8px;
  margin-bottom: 1rem;
}
dialog .dialog-actions {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  margin-top: 1rem;
}
/* Use existing button classes */
dialog .dialog-actions button.btn.secondary {
  background-color: #fff;
  border-color: #e5e7eb;
  color: #333;
}
dialog .dialog-actions button.btn.secondary:hover {
  background-color: #f9fafb;
}

/* =========================
   TOAST
========================= */
.toast{
  position:fixed; top:max(12px, env(safe-area-inset-top)); right:12px; z-index:2147483647;
  color:#fff; background:#28a745; padding:8px 12px; border-radius:8px; box-shadow:0 6px 12px rgba(0,0,0,.18);
  max-width:90vw; cursor:pointer; font-size:14px;
  opacity:0; transform:translate3d(0,-10px,0);
  transition:opacity .18s ease, transform .18s ease; will-change:opacity, transform; backface-visibility:hidden;
}
.toast.show{ opacity:1; transform:translate3d(0,0,0); }
.toast.hiding{ opacity:0; transform:translate3d(0,-6px,0); }
@media (max-width:480px){ .toast{ font-size:12px; padding:7px 10px; } }
@media (prefers-reduced-motion:reduce){ .toast{ transition:none; } }

/* =========================
   EXTRA
========================= */
.output-preview{
  background:#ecf0f1; border:1px solid #d8e1e8; border-radius:8px;
  padding:12px; min-height:110px; overflow:auto; font-size:12px;
}
.spinner{ width:18px; height:18px; border-radius:50%; border:3px solid #ccc; border-top-color:#3498db; display:inline-block; animation:spin 1s linear infinite; }
@keyframes spin{ to{ transform:rotate(360deg);} }
.logo-icon{ width:50px; height:50px; vertical-align:middle; }

/* =========================
   BOTTOM NAV (mobile only)
========================= */
.bottom-nav{ display:none; }
@media (max-width:768px){
  /* sembunyikan sidebar & burger */
  .sidebar, .sidebar-overlay{ display:none !important; }

  .main{ padding-bottom:calc(72px + env(safe-area-inset-bottom)); }

  .bottom-nav{
    position:fixed; left:0; right:0; bottom:0; height:64px;
    display:grid;
    /* Default non-admin: 4 kolom */
    grid-template-columns: repeat(4, 1fr);
    background:#fff; border-top:1px solid #e5e7eb; z-index:1000;
    padding-bottom:env(safe-area-inset-bottom);
    -webkit-tap-highlight-color:transparent;
  }
  /* Admin: 5 kolom stabil tanpa goyang */
  .is-admin .bottom-nav{ grid-template-columns: repeat(5, 1fr); }

  .bn-item{
    display:flex; flex-direction:column; align-items:center; justify-content:center; gap:2px;
    text-decoration:none; color:#444; font-size:11px; font-weight:600;
    transition:
      color var(--duration-ui) linear,
      transform var(--duration-ui) var(--ease-smooth),
      background-color var(--duration-ui) linear;
  }
  /* Default: sembunyikan tombol Admin di mobile nav untuk cegah flicker.
     Nanti akan ditampilkan lagi via class .is-admin (di <html> atau <body>) */
  .bn-item.bn-admin{ display:none; }
  .is-admin .bn-item.bn-admin{ display:flex; }
  .bn-item .material-icons{ font-size:22px; line-height:1; }
  .bn-item:hover{ color:#2563eb; }
  .bn-item:active{ filter:brightness(.92); transform:translateY(1px); }

  /* Spesifikasikan ukuran ikon logout di mobile agar tidak terlalu besar */
  .bn-item.bn-logout .material-icons {
    font-size: 20px; /* Ukuran yang pas untuk tombol logout mobile */
  }


  .bn-item.bn-monthly-trigger{
    appearance:none; -webkit-appearance:none; background:transparent; border:0; padding:0; margin:0;
    width:100%; height:100%; cursor:pointer;
  }

  /* active by page */
  body[data-page="trackmate"] .bn-trackmate,
  body[data-page="appsheet"]  .bn-appsheet,
  body[data-page="serah"]     .bn-serah{ color:#2563eb; }
  .bn-monthly-trigger[aria-expanded="true"]{ color:#2563eb; }

  /* monthly sheet */
  .bn-submenu{
    position:fixed; z-index:1001; right:12px; left:auto;
    bottom:calc(64px + 12px + env(safe-area-inset-bottom));
    width:280px; max-width:calc(100vw - 24px);
    background:#fff; border:1px solid #e5e7eb; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,.12);
    padding:10px; display:none; grid-template-columns:repeat(2, minmax(0,1fr)); gap:8px;
  }
  .bn-submenu[hidden]{ display:none !important; }
  .bn-submenu:not([hidden]){ display:grid; }

  .bn-subitem{
    display:flex; align-items:center; gap:8px; text-decoration:none;
    color:#444; font-weight:600; font-size:11px;
    padding:10px 12px; background:#fff; border:1px solid #e5e7eb; border-radius:10px;
  }
  .bn-subitem .material-icons{ font-size:16px; }
  .bn-subitem:active{ filter:brightness(.96); transform:translateY(1px); }
  .bn-subitem.active{ color:#2563eb; background:#eff6ff; border-color:#bfdbfe; }

  body[data-page="monthly"] .bn-monthly-trigger{ color:#2563eb; }

  @media (prefers-reduced-motion:reduce){
    .bn-item:active, .bn-subitem:active{ transform:none; filter:none; }
  }
}

/* =========================
   RESPONSIVE (â‰¤768px)
========================= */
@media (max-width:768px){
  .dashboard{ flex-direction:column; }
  :root{ --bn-h:64px; } /* kalau belum ada */

  .main{
    padding:1rem; 
    padding-bottom: calc(var(--bn-h) + env(safe-area-inset-bottom) + 16px) !important;
  }
  .dashboard-header{ gap:.75rem; margin-bottom:1rem; }

  /* judul pakai grid (override desktop absolute) */
  .dashboard-header{
    display:grid; grid-template-columns:auto 1fr auto; align-items:center; gap:12px; min-height:50px;
  }
  .dashboard-header .page-title,
  .dashboard-header h1,
  .dashboard-header h3{
    position:static; transform:none;
    grid-column: 1 / -1; justify-self:center; margin:0;
    font-size:20px; text-align:center; display:flex; align-items:center; gap:5px; pointer-events:none; z-index:1;
  }
  .dashboard-header .page-credit,
  .dashboard-header .right-slot{ grid-column:3; justify-self:end; z-index:2; }

  /* card & form scale */
  html{ font-size:12px; zoom:90%; }
  .card{ padding:1rem; border-radius:10px; }
  .card h3{ margin-bottom:.75rem; font-size:1.05rem; line-height:1.3; }
  .form-group{ gap:.4rem; margin:.75rem 0; }
  label{ font-size:.95rem; }
  .form-group select{ font-size:11px; }
  input[type="date"], select, pre{ font-size:.95rem; padding:.5rem .6rem; border-radius:6px; margin-bottom:.75rem; }
  .upload-label, .btn-upload{ padding:8px 10px; font-size:.9rem; border-radius:6px; gap:6px; margin-bottom:.75rem; }
  .output-preview{ font-size:10px; min-height:100px; padding:10px; }
  .card .upload-label, .card .btn-upload{ max-width:150px; width:100%; }
  .card button{ width:100%; max-width:150px; }
  .btn-row{ justify-content:center; gap:12px; margin-top:20px; flex-wrap:wrap; }

  /* SERAH mobile tweaks - Controls Bar */
  body[data-page="serah"] .controls-bar{
    flex-direction: column;
    align-items: stretch;
    gap: 1.5rem;
  }
  body[data-page="serah"] .controls-bar .controls-left {
    width: 100%; /* Pastikan kontainer kiri ini mengambil lebar penuh */
    flex-direction: column; /* Tumpuk grup input secara vertikal */
    align-items: stretch; /* Regangkan grup input di dalamnya agar full-width */
  }
  body[data-page="serah"] .controls-bar .controls-right {
    margin-left: 0; /* Override desktop style */
    gap: 1rem; /* Jarak antar tombol di mobile */
    justify-content: center; /* Center the buttons */
  }
  /* Ensure the input/select inside the group fills its container */
  body[data-page="serah"] .controls-bar .controls-left .form-group input,
  body[data-page="serah"] .controls-bar .controls-left .form-group select {
    width: 100%;
    min-width: 0; /* Override desktop min-width */
    max-width: none; /* Hapus batasan lebar agar bisa full-width */
  }
  body[data-page="serah"] .table-container{
    max-height:50vh;
  }
  body[data-page="serah"] .table{ min-width:900px; }

  /* FREEZE KOLOM HANYA DI MOBILE */
  /* Header harus punya z-index lebih tinggi dari body kolom sticky */
  body[data-page="serah"] .table thead th { z-index: 5; }

  body[data-page="serah"] .table th:first-child,
  body[data-page="serah"] .table td:first-child {
    position: sticky; left: 0; z-index: 4;
    box-shadow: 2px 0 5px rgba(0,0,0,0.07);
    transition: box-shadow .2s ease;
  }
  /* Perbaiki warna header kolom sticky di mobile agar sama dengan header lain */
  body[data-page="serah"] .table th:first-child { z-index: 6; background: #f8fafc; }
  body[data-page="serah"] .table td:first-child { background: #fff; }
  /* Pastikan kolom sticky ikut berubah warna saat di-hover, sama seperti baris lainnya */
  body[data-page="serah"] .table tbody tr:hover td:first-child { background-color: #f8fafc; }
}

/* =========================
   iOS SAFARI TWEAKS
========================= */
@supports (-webkit-touch-callout:none){
  body[data-page="trackmate"] select,
  body[data-page="appsheet"] select{
    -webkit-appearance:none !important; appearance:none !important;
    box-shadow:none !important; background:#fff !important;
    border:1px solid #e5e7eb !important; border-radius:10px !important;
    height:30px !important; padding:0 12px !important; line-height:30px !important;
    font-size:12px !important; color:#111 !important;
  }
  body[data-page="trackmate"] select option[disabled],
  body[data-page="appsheet"]  select option[disabled]{ color:#9ca3af !important; }

  body[data-page="serah"] input[type="date"]{
    -webkit-appearance:none; appearance:none;
    height:30px !important; padding:0 12px !important; line-height:30px !important;
    font-size:12px !important; text-align:center; background:#fff;
  }
  body[data-page="serah"] input[type="date"]::-webkit-date-and-time-value{ text-align:center; }
}
